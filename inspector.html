<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inspector - KHDA Inspection | Techno Group Originator</title>
    <meta name="description" content="AI School Inspection Assistant for the KHDA Framework">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="icon" type="image/x-icon" href="assets/images/Techno-Logo.jpg">
</head>
<body>
    <main class="inspector-main" id="inspector-app">
        <!-- Header -->
        <header class="header">
            <div class="header-container">
                <a href="index.html" class="logo-link">
                    <div class="logo-container">
                        <img src="assets/images/Techno-Logo.jpg" alt="Techno Group Originator" class="logo-image">
                    </div>
                    <div class="logo-text">
                        <span class="company-name">Techno Group Originator</span>
                        <span class="project-name">EAD Project</span>
                    </div>
                </a>

                <div class="nav">
                    <span class="badge badge-secondary">KHDA Inspection Framework</span>
                    <a href="https://www.khda.gov.ae" target="_blank" rel="noreferrer" class="text-xs text-slate-500 hover:text-slate-700">
                        Learn about KHDA
                    </a>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="inspector-container">
            <div class="inspector-notice">
                Built by Techno Group Originator under the EAD project for KHDA-aligned AI inspection services.
            </div>

            <!-- Hero Intro Section -->
            <div class="card intro-card">
                <div class="card-content">
                    <div class="intro-hero">
                        <h1 class="intro-title">The Agentic Inspection System</h1>
                        <p class="intro-description">
                            Upload, analyze, inspect, and generate comprehensive reports. Built for school inspections under EAD, this demonstration showcases how AI agents collaborate to process multiple evidence types and produce KHDA-aligned insights.
                        </p>
                    </div>

                    <!-- File Types Grid -->
                    <div class="file-types-grid">
                        <div class="file-type-card">
                            <div class="file-type-icon video">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polygon points="23 7 16 12 23 17 23 7"/>
                                    <rect x="1" y="5" width="15" height="14" rx="2" ry="2"/>
                                </svg>
                            </div>
                            <h3 class="file-type-title">Video Files</h3>
                            <p class="file-type-desc">Classroom observations, teaching demonstrations, and school activities</p>
                            <div class="file-type-formats">
                                <span class="format-tag">MP4</span>
                                <span class="format-tag">MOV</span>
                                <span class="format-tag">AVI</span>
                            </div>
                        </div>

                        <div class="file-type-card">
                            <div class="file-type-icon image">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                    <circle cx="9" cy="9" r="2"/>
                                    <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
                                </svg>
                            </div>
                            <h3 class="file-type-title">Images</h3>
                            <p class="file-type-desc">School facilities, student work samples, and documentation photos</p>
                            <div class="file-type-formats">
                                <span class="format-tag">JPG</span>
                                <span class="format-tag">PNG</span>
                                <span class="format-tag">JPEG</span>
                            </div>
                        </div>

                        <div class="file-type-card">
                            <div class="file-type-icon document">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
                                    <polyline points="14,2 14,8 20,8"/>
                                    <line x1="16" y1="13" x2="8" y2="13"/>
                                    <line x1="16" y1="17" x2="8" y2="17"/>
                                </svg>
                            </div>
                            <h3 class="file-type-title">Documents</h3>
                            <p class="file-type-desc">Curricula, student reports, policies, and inspection documentation</p>
                            <div class="file-type-formats">
                                <span class="format-tag">PDF</span>
                            </div>
                        </div>

                        <div class="file-type-card">
                            <div class="file-type-icon audio">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9 18V5l12-2v13"/>
                                    <circle cx="6" cy="18" r="3"/>
                                    <circle cx="18" cy="16" r="3"/>
                                </svg>
                            </div>
                            <h3 class="file-type-title">Audio Files</h3>
                            <p class="file-type-desc">Interviews, meetings, classroom recordings, and oral assessments</p>
                            <div class="file-type-formats">
                                <span class="format-tag">MP3</span>
                                <span class="format-tag">WAV</span>
                                <span class="format-tag">M4A</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Workflow Visualization Card -->
            <div class="card workflow-card">
                <div class="card-header">
                    <div class="step-header">
                        <svg class="icon-lg text-sky-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 3h18v18H3z"/>
                            <path d="M7 7h10v10H7z"/>
                        </svg>
                        <div>
                            <h3 class="card-title">Agent Workflow Preview</h3>
                            <p class="card-description">See how AI agents coordinate to analyze evidence and generate comprehensive reports</p>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="tabs">
                        <button id="workflow-tab-diagram" class="tab-btn tab-active" type="button">Diagram</button>
                        <button id="workflow-tab-json" class="tab-btn" type="button">JSON</button>
                    </div>

                    <!-- Mermaid Diagram -->
                    <div id="workflow-diagram" class="mermaid">
                        flowchart LR
                            entry["SchoolInspectionPipeline"] --> par
                            ext["EvidenceAnalysisOrchestrator"] --> S
                            subgraph seq["SchoolInspectionPipeline (Sequential Agent)"]
                                S["SynthesisAgent"] --> F["FinalReportAgent"]
                            end
                            subgraph par["EvidenceAnalysisOrchestrator (Parallel Agent)"]
                                T["TextAnalysisAgent"]
                                A["AudioAnalysisAgent"]
                                V["VideoAnalysisAgent"]
                            end
                            S -- "uses" --> tool1["retrieve_from_collection"]
                            F -- "uses" --> tool2["create_pdf_report"]
                            F -- "uses" --> tool3["get_current_date"]
                            entry --> par
                            classDef active fill:#059669,stroke:#047857,color:#ffffff;
                            class V active;
                    </div>

                    <!-- JSON View -->
                    <pre id="workflow-json-pre" class="json-view" style="display: none;"></pre>
                    <script id="workflow-data" type="application/json">{
  "workflow_name": "SchoolInspectionPipeline",
  "workflow_type": "Sequential Agent",
  "description": "This workflow visualizes a sequential process for a school inspection. It begins with evidence analysis, proceeds to synthesis, and concludes with the generation of a final report.",
  "components": [
    {
      "id": "school_inspection_pipeline_entry",
      "name": "SchoolInspectionPipeline",
      "type": "Entry Point",
      "description": "The main entry point for the entire workflow.",
      "outputs_to": ["evidence_analysis_orchestrator_parallel"]
    },
    {
      "id": "evidence_analysis_orchestrator_external",
      "name": "EvidenceAnalysisOrchestrator",
      "type": "External Input",
      "description": "An external orchestrator that provides initial evidence.",
      "outputs_to": ["synthesis_agent"]
    },
    {
      "id": "school_inspection_pipeline_sequential",
      "name": "SchoolInspectionPipeline (Sequential Agent)",
      "type": "Container",
      "description": "The primary sequential agent that contains the core steps of the pipeline.",
      "sub_components": [
        {
          "id": "synthesis_agent",
          "name": "SynthesisAgent",
          "type": "Agent",
          "description": "Receives data from the external EvidenceAnalysisOrchestrator and uses a tool to process it.",
          "inputs_from": ["evidence_analysis_orchestrator_external"],
          "outputs_to": ["final_report_agent"],
          "connected_tools": ["retrieve_from_collection"]
        },
        {
          "id": "evidence_analysis_orchestrator_parallel",
          "name": "EvidenceAnalysisOrchestrator (Parallel Agent)",
          "type": "Container",
          "execution_mode": "Parallel",
          "description": "A nested agent that processes different types of media evidence in parallel.",
          "inputs_from": ["school_inspection_pipeline_entry"],
          "sub_components": [
            {
              "id": "text_analysis_agent",
              "name": "TextAnalysisAgent",
              "type": "Agent",
              "description": "Analyzes textual evidence.",
              "status": "idle"
            },
            {
              "id": "audio_analysis_agent",
              "name": "AudioAnalysisAgent",
              "type": "Agent",
              "description": "Analyzes audio evidence.",
              "status": "idle"
            },
            {
              "id": "video_analysis_agent",
              "name": "VideoAnalysisAgent",
              "type": "Agent",
              "description": "Analyzes video evidence.",
              "status": "active",
              "notes": "This agent is highlighted in green, indicating it is the currently active or executing task in the parallel process."
            }
          ]
        },
        {
          "id": "final_report_agent",
          "name": "FinalReportAgent",
          "type": "Agent",
          "description": "The final agent in the sequence. It takes the synthesized data and generates a final report using multiple tools.",
          "inputs_from": ["synthesis_agent"],
          "connected_tools": ["create_pdf_report", "get_current_date"]
        }
      ]
    }
  ],
  "tools": [
    {
      "id": "retrieve_from_collection",
      "name": "retrieve_from_collection",
      "description": "A tool used by the SynthesisAgent, likely to fetch data from a database or collection.",
      "used_by": "synthesis_agent"
    },
    {
      "id": "create_pdf_report",
      "name": "create_pdf_report",
      "description": "A tool used by the FinalReportAgent to generate the output file in PDF format.",
      "used_by": "final_report_agent"
    },
    {
      "id": "get_current_date",
      "name": "get_current_date",
      "description": "A tool used by the FinalReportAgent, likely to timestamp the final report.",
      "used_by": "final_report_agent"
    }
  ],
  "workflow_sequence": [
    { "from": "EvidenceAnalysisOrchestrator (External)", "to": "SynthesisAgent" },
    { "from": "SchoolInspectionPipeline (Entry)", "to": "EvidenceAnalysisOrchestrator (Parallel)", "contains": ["TextAnalysisAgent", "AudioAnalysisAgent", "VideoAnalysisAgent"] },
    { "from": "SynthesisAgent", "to": "FinalReportAgent" }
  ]
}</script>
                </div>
            </div>

            <div class="inspector-grid">
                <!-- Main Content Area -->
                <div class="inspector-main-content">
                    <!-- Step 1: Upload & Analyze -->
                    <div class="card step-card">
                        <div class="card-header">
                            <div class="step-header">
                                <svg class="icon-lg text-sky-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
                                    <polyline points="14,2 14,8 20,8"/>
                                    <path d="M12 18v-6"/>
                                    <path d="m9 15 3-3 3 3"/>
                                </svg>
                                <div>
                                    <h2 class="step-title">Step 1: Upload Evidence</h2>
                                    <p class="step-description">
                                        Select and upload your inspection evidence. AI agents will analyze the content and extract relevant insights.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="card-content">
                            <form id="analyze-form" class="form">
                                <div class="form-group">
                                    <label for="file-input" class="label">Choose Evidence Files (up to 5)</label>
                                    <input id="file-input" type="file" accept=".pdf,image/*,audio/*,video/*" multiple class="input" aria-describedby="file-help">
                                    <p id="file-help" class="help-text">
                                        Upload up to 5 files: PDF, images, audio, or video. The system will automatically detect the content type and process accordingly.
                                    </p>
                                </div>

                                <div class="form-actions">
                                    <button type="submit" id="analyze-btn" class="btn btn-default" style="display: none;">
                                        Start Agent Analysis
                                    </button>
                                    <span id="file-selected" class="file-selected" style="display: none;"></span>
                                </div>
                            </form>

                            <!-- Status Alert -->
                            <div id="status-alert" class="alert" style="display: none;"></div>
                            
                        </div>
                    </div>

                    <!-- Separator -->
                    <div class="separator"></div>

                    <!-- Step 2: Review Analysis & Generate Report -->
                    <div class="card step-card">
                        <div class="card-header">
                            <div class="step-header">
                                <svg class="icon-lg text-slate-700" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
                                    <polyline points="14,2 14,8 20,8"/>
                                    <line x1="16" y1="13" x2="8" y2="13"/>
                                    <line x1="16" y1="17" x2="8" y2="17"/>
                                    <polyline points="10,9 9,9 8,9"/>
                                </svg>
                                <div>
                                    <h2 class="step-title">Step 2: Generate Inspection Report</h2>
                                    <p class="step-description">
                                        Review extracted insights and initiate the agentic workflow to produce a comprehensive KHDA-aligned inspection report.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="card-content">
                            <!-- Analysis Display -->
                            <div id="analysis-container" class="analysis-container" aria-live="polite">
                                <p class="analysis-placeholder">
                                    Upload evidence and start analysis to see structured findings and insights here.
                                </p>
                            </div>

                            <!-- Generate Actions -->
                            <div class="generate-actions">
                                <button id="generate-btn" class="btn btn-success btn-lg" disabled style="display: none;">
                                    Start Inspection Workflow
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/>
                                        <path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/>
                                        <path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/>
                                        <path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/>
                                    </svg>
                                </button>

                                <a id="download-btn" href="#" download class="btn-download" style="display: none;">
                                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="7,10 12,15 17,10"/>
                                        <line x1="12" y1="15" x2="12" y2="3"/>
                                    </svg>
                                    Download Report
                                </a>
                            </div>

                            <!-- Agent Runner Visualization -->
                            <div id="agent-runner" class="agent-runner" style="display: none;"></div>

                            <p id="report-notice" class="report-notice" style="display: none;">
                                Your inspection report has been successfully generated and is ready for download.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <aside class="inspector-sidebar">
                    <div class="card about-card">
                        <div class="card-header">
                            <h3 class="card-title">Sample Evidence</h3>
                            <p class="card-description">Preview or download sample PDFs</p>
                        </div>
                        <div class="about-content">
                            <ul class="sample-links">
                                <li>
                                    <span>Attendance Register (PDF)</span>
                                    <div class="form-actions">
                                        <button type="button" class="btn btn-outline preview-pdf" data-url="assets/samples/Attendance Register.pdf">Preview</button>
                                        <a href="assets/samples/Attendance Register.pdf" download class="btn btn-outline">Download</a>
                                    </div>
                                </li>
                                <li>
                                    <span>Curriculum Policy (PDF)</span>
                                    <div class="form-actions">
                                        <button type="button" class="btn btn-outline preview-pdf" data-url="assets/samples/Curriculum Policy.pdf">Preview</button>
                                        <a href="assets/samples/Curriculum Policy.pdf" download class="btn btn-outline">Download</a>
                                    </div>
                                </li>
                                <li>
                                    <span>School Improvement Plan (PDF)</span>
                                    <div class="form-actions">
                                        <button type="button" class="btn btn-outline preview-pdf" data-url="assets/samples/School Improvement Plan.pdf">Preview</button>
                                        <a href="assets/samples/School Improvement Plan.pdf" download class="btn btn-outline">Download</a>
                                    </div>
                                </li>
                                <li>
                                    <span>Student Progress Report (PDF)</span>
                                    <div class="form-actions">
                                        <button type="button" class="btn btn-outline preview-pdf" data-url="assets/samples/Student Progress Report.pdf">Preview</button>
                                        <a href="assets/samples/Student Progress Report.pdf" download class="btn btn-outline">Download</a>
                                    </div>
                                </li>
                                <li>
                                    <span>UAE School Plan 2025 (PDF)</span>
                                    <div class="form-actions">
                                        <button type="button" class="btn btn-outline preview-pdf" data-url="assets/samples/Uae School Plan 2025.pdf">Preview</button>
                                        <a href="assets/samples/Uae School Plan 2025.pdf" download class="btn btn-outline">Download</a>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </aside>
            </div>
        </div>

        <!-- Partnership Section -->
        <section class="partnership-section">
            <div class="partnership-container">
                <div class="partnership-header">
                    <h3 class="partnership-title">Our Partners</h3>
                    <p class="partnership-subtitle">Collaborative innovation in education technology</p>
                </div>
                <div class="partnership-logos">
                    <div class="partner-item">
                        <div class="partner-logo">
                            <img src="assets/images/Techno-Logo.jpg" alt="Techno Group Originator">
                        </div>
                        <span class="partner-name">Techno Group</span>
                    </div>
                    <div class="partner-item">
                        <div class="partner-logo-wide">
                            <img src="assets/images/EAD-Logo.png" alt="Emirates Authority for Development">
                        </div>
                        <span class="partner-name">EAD</span>
                    </div>
                    <div class="partner-item">
                        <div class="partner-logo-wide">
                            <img src="assets/images/Dubai-KHDA-Logo.png" alt="Knowledge and Human Development Authority" class="dubai-logo-filter">
                        </div>
                        <span class="partner-name">KHDA</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-container">
                <p class="footer-text">
                    Built by <strong>Techno Group Originator</strong> under the <strong>EAD</strong> project for advanced AI-powered inspection capabilities.
                </p>
                <p class="footer-copyright">Â© <span id="current-year"></span> Techno Group Originator. All rights reserved.</p>
            </div>
        </footer>
    </main>

    <!-- Mermaid CDN for the diagram -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        if (window.mermaid) {
            window.mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
        }
        // Set current year
        document.getElementById('current-year').textContent = new Date().getFullYear();
    </script>
    <div id="pdf-modal" class="modal" aria-hidden="true" style="display: none;">
        <div class="modal-backdrop" data-modal-close></div>
        <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="pdf-modal-title">
            <div class="modal-header">
                <h3 id="pdf-modal-title" class="card-title">PDF Preview</h3>
                <button type="button" id="pdf-modal-close" class="btn btn-outline">Close</button>
            </div>
            <div class="modal-body">
                <iframe id="pdf-frame" class="pdf-frame" src="" title="PDF preview"></iframe>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="assets/js/main.js"></script>
</body>
</html> 